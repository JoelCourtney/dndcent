#######################
# Template for spells #
#######################

name: Absorb Elements

# Type
level: 1
school: abjuration

# available to:
#  - list of classes, subclasses, and feats

# Casting properties
casting time: 1 reaction
reaction to: immediately before taking acid, cold, fire, lightning, or thunder damage
ritual: false # true, false, or optional

range: self

verbal: false
somatic: true
material: false # delete line below if false

duration: 1 round
concentration: false # true or false

# Fun stuff
description: >
  The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee
  attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you
  hit with a melee attack on your next turn, the target takes an extra 1d6 damage of the triggering type, and the
  spell ends.

  **At Higher Levels.** When you cast this spell using a spell slot of 2nd level or higher, the extra damage increases by
  1d6 for each slot level above 1st.

display in combat: true
display in roleplay: false

results:
  - not until:
      events:
        - take acid damage
        - take cold damage
        - take fire damage
        - take lightning damage
        - take thunder damage
      type: any
    results:
      - until:
          events:
            - start of turn
          type: consecutive
        results:
          - modify: character[resistances]
            add: parent[parent][damage type]
      - until:
          events:
            - start of turn
            - end of turn
          type: consecutive
        not until:
          events:
            - deal melee damage
          type: any
        results:
          - modify once: parent[weapon]
            add: root[cast level] * 1d6 parent[parent][damage type]
